<bookcovers>
  <bookcover each={ bookcovers } bookcover={ this }></bookcover>
  <a href="{ PrevLink }" onclick={ getBooks }>Prev</a>
  <a href="{ NextLink }" onclick={ getBooks }>Next</a>

  <script>
  var self = this
  self.bookcovers = []
  self.targetLink = ""
  this.on('mount', function() {
    RiotControl.trigger('ve_bookcover_list_init')
  })
  RiotControl.on('se_bookcovers_changed', function(bookcovers) {
    self.PrevLink = bookcovers['PrevLink']
    self.NextLink = bookcovers['NextLink']
    self.bookcovers = bookcovers['Books']
    self.update()
  })

  getBooks(e) {
    console.log(e.currentTarget)
    var data_url = $(e.currentTarget).attr("href")
    console.log(data_url)
    RiotControl.trigger('ve_bookcover_get_data', data_url)
    return false
  }

  this.on("updated", function () {
    $('.thumbnail').popover({
        html: true,
        placement: 'auto right',
        trigger: 'hover',
        delay: {show: 250, hide: 100},
        template: '<div class="popover popover-movie" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',
        content: function () {
            var id = $(this).data('id');
            return $('#panel-' + id).html();
        }
    });
  })
  </script>
</bookcovers>

<bookcover>
  <div class="book-block">

    <div class="thumbnail" data-id="{ Id }" data-original-title="" title="">
      <a href="#" ><img src="/books/{Id}/{Id}.jpg" /></a>
    </div>

    <div id="panel-{ Id }" class="hidden">
      <p>
        <strong>{ Title }<br>CREEM, David</strong>
      </p>

      <p>« Bienvenue à l’Institut Californien de Parapsychologie. Cette année, nous travaillerons autour de trois grands axes : perceptions extra-sensorielles, psychokinèse et décorporation. » À l’université de Cap Rock, les élèves qui suivent le cursus du professeur Wiseman ne sont pas comme les autres. Leur originalité ? Ils possèdent tous des dons exceptionnels : télékinésie, télépathie, pyrokinésie… L’objectif de David en s’y inscrivant : découvrir la nature de ses capacités afin d’élucider la mystérieuse disparition de son grand-père. Une quête qui l’emportera au-delà des frontières de la réalité, dans les zones insoupçonnées de l’Invisible, là où, depuis toujours, se joue le destin de l’univers.</p>

      <div class="list-group">
        <div class="list-group-item">
          <strong>Sortie: </strong>
            <span class="badge">nov 2014</span>
         </div>
        <div class="list-group-item">
          <strong>Editeur: </strong>
            <span class="badge">j'ai Lu</span>
        </div>
        <div class="list-group-item">
          <strong>Collection: </strong>
            <span class="badge">Poche</span>
        </div>
        <div class="list-group-item">
          <strong>Genre: </strong>
            <span class="badge">Fantasy</span>
            <span class="badge">Fantastique</span>
        </div>
        <div class="list-group-item">
          <strong>Langues: </strong>
            <span class="badge">Français</span>
        </div>
        <div class="list-group-item">
            <strong>Ajouté le:</strong>
            <span class="badge">il y a 2 mois</span>
        </div>
      </div> <!-- list group -->

    </div> <!-- panel-->
  </div> <!-- book blok -->
  <script>
    this.bookcover = opts.bookcover
  </script>
</bookcover>
